                          ğŸ“¦ ESTRUCTURA DEL PROYECTO SCRIPTS
                              
                           ğŸ¯ OBJETIVO PRINCIPAL

Automatizar el flujo completo de prueba de NBA Stats API:
  1. Crear usuario en Supabase + BD
  2. Asignar suscripciÃ³n 'free'
  3. Generar API key
  4. Probar endpoints hasta alcanzar lÃ­mite de rate limiting

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ“‚ ARCHIVOS CREADOS

CÃ“DIGO PRINCIPAL (Para Ejecutar):
â”œâ”€â”€ main.py â­
â”‚   â””â”€ Script orquestrador principal
â”‚      Ejecuta: user_creator â†’ subscription_assigner â†’ api_key_creator â†’ endpoint_tester
â”‚
â”œâ”€â”€ user_creator.py
â”‚   â””â”€ MÃ³dulo para crear usuarios
â”‚      Entrada: email
â”‚      Salida: user_info {id, email, supabase_user_id, created_at}
â”‚
â”œâ”€â”€ subscription_assigner.py
â”‚   â””â”€ MÃ³dulo para asignar suscripciones
â”‚      Entrada: user_id
â”‚      Salida: subscription_info {subscription_id, plan_name, rate_limits}
â”‚
â”œâ”€â”€ api_key_creator.py
â”‚   â””â”€ MÃ³dulo para generar API keys
â”‚      Entrada: user_id, key_name
â”‚      Salida: api_key_info {id, api_key, last_chars, rate_limit_plan}
â”‚
â””â”€â”€ endpoint_tester.py
    â””â”€ MÃ³dulo para probar endpoints
       Entrada: api_key, endpoints, limit_window
       Salida: test_results [{request_number, endpoint, status_code, ...}]

CÃ“DIGO DE UTILIDAD:
â”œâ”€â”€ examples.py
â”‚   â””â”€ Ejemplos avanzados de uso
â”‚      â€¢ Crear mÃºltiples usuarios
â”‚      â€¢ Setup completo en una funciÃ³n
â”‚      â€¢ Probar endpoints especÃ­ficos
â”‚      â€¢ Monitorear rate limits
â”‚      â€¢ Consultar datos de usuario
â”‚
â””â”€â”€ __init__.py
    â””â”€ Inicializador del mÃ³dulo

DOCUMENTACIÃ“N:
â”œâ”€â”€ QUICKREF.md âš¡
â”‚   â””â”€ Referencia rÃ¡pida (2-3 min)
â”‚      Lo mÃ­nimo imprescindible para empezar
â”‚
â”œâ”€â”€ README.md ğŸ“–
â”‚   â””â”€ GuÃ­a completa
â”‚      Requisitos, instalaciÃ³n, uso detallado, ejemplos
â”‚
â”œâ”€â”€ ARCHITECTURE.md ğŸ—ï¸
â”‚   â””â”€ DocumentaciÃ³n tÃ©cnica
â”‚      Diagramas de flujo, estructura de BD, flujos de datos
â”‚
â”œâ”€â”€ TROUBLESHOOTING.md ğŸ”§
â”‚   â””â”€ SoluciÃ³n de problemas
â”‚      Errores comunes, soluciones, debugging
â”‚
â”œâ”€â”€ INDEX.md ğŸ“š
â”‚   â””â”€ Ãndice de archivos
â”‚      DescripciÃ³n de cada archivo, cuÃ¡ndo usarlo
â”‚
â””â”€â”€ SUMMARY.txt ğŸ“‹
    â””â”€ Resumen ejecutivo
       Overview de todo lo creado, inicio rÃ¡pido

CONFIGURACIÃ“N:
â””â”€â”€ requirements-scripts.txt
    â””â”€ Dependencias Python (referencia)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          ğŸš€ INICIO RÃPIDO (30 segundos)

$ cd e:\Proyectos\nba-stats-api
$ python scripts/main.py test@example.com

âœ“ Usuario creado
âœ“ SuscripciÃ³n asignada  
âœ“ API key generada
âœ“ Endpoints probados

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ“Š RELACIONES

                               main.py
                                  â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                â”‚                â”‚
                 â–¼                â–¼                â–¼
            user_creator   subscription_assigner api_key_creator
                 â”‚                â”‚                â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                           endpoint_tester

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                         ğŸ“ DÃ“NDE BUSCAR INFORMACIÃ“N

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ "Quiero empezar ya" â†’ QUICKREF.md                    (â±ï¸ 2 min)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Â¿CÃ³mo instalo?" â†’ README.md secciÃ³n "Requisitos"    (â±ï¸ 5 min)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Â¿CÃ³mo lo uso?" â†’ README.md secciÃ³n "Uso"            (â±ï¸ 5 min)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Â¿CÃ³mo funciona?" â†’ ARCHITECTURE.md                  (â±ï¸ 10 min)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Tengo un error" â†’ TROUBLESHOOTING.md                (â±ï¸ variable)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Quiero ejemplos" â†’ examples.py                      (â±ï¸ 15 min)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Â¿QuÃ© archivo es?" â†’ INDEX.md                        (â±ï¸ 5 min)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            âœ… CARACTERÃSTICAS

âœ“ Modular        - Cada paso en su propio mÃ³dulo
âœ“ Reutilizable   - Usar mÃ³dulos independientemente
âœ“ Documentado    - Docstrings y documentaciÃ³n completa
âœ“ Async/Await    - Operaciones no bloqueantes
âœ“ Seguro         - API keys hasheadas con Argon2
âœ“ Flexible       - ParÃ¡metros personalizables
âœ“ Robusto        - Manejo de errores y validaciones
âœ“ Observable     - Logging y salida clara

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ“ˆ FLUJO DE EJECUCIÃ“N

1. usuario ingresa: python scripts/main.py test@example.com

2. main.py inicia:
   â”œâ”€ Parsea argumentos
   â”œâ”€ Crea TestFlowOrchestrator
   â””â”€ Llama run_complete_flow()

3. Pasos ejecutados:
   â”œâ”€ PASO 1: user_creator.create_user()
   â”‚   â””â”€ Crea usuario en Supabase + BD
   â”œâ”€ PASO 2: subscription_assigner.assign_free_subscription()
   â”‚   â””â”€ Asigna plan 'free'
   â”œâ”€ PASO 3: api_key_creator.create_api_key()
   â”‚   â””â”€ Genera API key segura
   â””â”€ PASO 4: endpoint_tester.test_endpoints_until_limit()
       â””â”€ Prueba endpoints hasta lÃ­mite

4. Salida:
   â”œâ”€ Resumen en consola
   â”œâ”€ Datos completos retornados
   â””â”€ CÃ³digo de salida: 0 (Ã©xito) o 1 (error)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          ğŸ” SEGURIDAD INTEGRADA

API Keys:
â”œâ”€ Generadas con secrets.token_urlsafe(32)
â”œâ”€ Hasheadas con Argon2 (nunca texto plano en BD)
â”œâ”€ Mostradas solo UNA VEZ al crear
â””â”€ No recuperables despuÃ©s de creadas

ContraseÃ±as:
â”œâ”€ Se almacenan en Supabase Auth (no en nuestra BD)
â””â”€ Manejadas automÃ¡ticamente por Supabase

Rate Limiting:
â”œâ”€ Almacenado en Redis (volÃ¡til)
â”œâ”€ Ventanas independientes (minuto/hora/dÃ­a)
â””â”€ Reseteadas automÃ¡ticamente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          ğŸ¯ PARÃMETROS SOPORTADOS

main.py EMAIL [OPTIONS]

EMAIL (requerido)
â””â”€ test@example.com, user@domain.io, etc.

--api-url URL (opcional)
â”œâ”€ Default: http://localhost:8000/api/v1
â””â”€ Ejemplo: --api-url http://api.example.com/api/v1

--limit-window WINDOW (opcional)
â”œâ”€ minute (default) - 10 requests
â”œâ”€ hour             - 100 requests
â””â”€ day              - 1000 requests

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ’¾ DATOS CREADOS EN BD

Tabla users:
â”œâ”€ id: int (auto-incrementado)
â”œâ”€ email: string (Ãºnico)
â”œâ”€ supabase_user_id: UUID (Ãºnico)
â”œâ”€ role: string
â”œâ”€ is_active: boolean
â””â”€ created_at, updated_at: timestamps

Tabla user_subscriptions:
â”œâ”€ id: int (auto-incrementado)
â”œâ”€ user_id: FK â†’ users
â”œâ”€ plan_id: FK â†’ subscription_plans
â”œâ”€ status: 'active'
â”œâ”€ current_period_start: datetime
â”œâ”€ current_period_end: datetime (ahora + 30 dÃ­as)
â””â”€ price_paid_cents: 0 (gratis)

Tabla api_keys:
â”œâ”€ id: int (auto-incrementado)
â”œâ”€ user_id: FK â†’ users
â”œâ”€ key_hash: string (Argon2)
â”œâ”€ last_chars: string (Ãºltimos 8)
â”œâ”€ is_active: boolean
â”œâ”€ rate_limit_plan: 'free'
â”œâ”€ created_at: timestamp
â””â”€ expires_at: null

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ“ CONTACTO Y SOPORTE

Si algo no funciona:
1. Ver TROUBLESHOOTING.md (soluciones comunes)
2. Verificar .env estÃ¡ configurado
3. Verificar BD estÃ¡ corriendo
4. Verificar API estÃ¡ corriendo
5. Revisar logs en consola

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                          ğŸš€ Â¡LISTO PARA USAR!

Ejecuta en terminal:

    python scripts/main.py test@example.com

Y espera a ver:

    âœ“ Flujo completado exitosamente
    âœ“ Usuario: test@example.com
    âœ“ SuscripciÃ³n: free
    âœ“ API Key: bestat_nba_xK9mP2vQ7sL4nR8wE3jT1dF6hY5cV0bN
    âœ“ Requests realizados: 10

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
